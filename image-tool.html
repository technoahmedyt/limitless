<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Image Editor Pro</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{background:#1e1f26;color:#fff;padding:20px;display:flex;justify-content:center}
.container{max-width:1100px;width:100%}
h1{text-align:center;margin-bottom:20px}

canvas{background:#000;width:100%;border-radius:8px;margin-top:15px}

.section{
  background:#2a2d3a;
  padding:15px;
  margin-bottom:15px;
  border-radius:10px;
}

.section h2{margin-bottom:10px;font-size:18px}

.controls{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}

.controls label{
  display:flex;
  flex-direction:column;
  font-size:13px;
}

input[type=range], input[type=number]{
  padding:5px;
  border-radius:5px;
  border:none;
}

button{
  padding:8px 12px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:bold;
  background:#4e73df;
  color:#fff;
}

button:hover{opacity:0.8}

.btn-danger{background:#e74a3b}
.btn-success{background:#1cc88a}

@media(max-width:768px){
  .controls{flex-direction:column}
}
</style>
</head>

<body>
<div class="container">
<h1>Advanced Image Editing Tool</h1>

<input type="file" id="upload" accept="image/*">

<div class="section">
<h2>Adjustments</h2>
<div class="controls">
<label>Brightness <input type="range" id="brightness" min="0" max="200" value="100"></label>
<label>Contrast <input type="range" id="contrast" min="0" max="200" value="100"></label>
<label>Saturation <input type="range" id="saturation" min="0" max="200" value="100"></label>
<label>Blur <input type="range" id="blur" min="0" max="10" step="0.1" value="0"></label>
<label>Grayscale <input type="range" id="grayscale" min="0" max="100" value="0"></label>
<label>Sepia <input type="range" id="sepia" min="0" max="100" value="0"></label>
</div>
</div>

<div class="section">
<h2>Transform</h2>
<div class="controls">
<button onclick="rotate(-90)">Rotate ⟲</button>
<button onclick="rotate(90)">Rotate ⟳</button>
<button onclick="flipH()">Flip H</button>
<button onclick="flipV()">Flip V</button>
<button class="btn-danger" onclick="resetAll()">Reset</button>
</div>
</div>

<div class="section">
<h2>Resize</h2>
<div class="controls">
<label>Width <input type="number" id="resizeW"></label>
<label>Height <input type="number" id="resizeH"></label>
<button onclick="resizeImage()">Apply Resize</button>
</div>
</div>

<div class="section">
<h2>Crop</h2>
<div class="controls">
<label>X <input type="number" id="cropX" value="0"></label>
<label>Y <input type="number" id="cropY" value="0"></label>
<label>Width <input type="number" id="cropW"></label>
<label>Height <input type="number" id="cropH"></label>
<button onclick="cropImage()">Apply Crop</button>
</div>
</div>

<canvas id="canvas"></canvas>

<button class="btn-success" onclick="downloadImage()">Download Edited Image</button>

</div>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

let img=new Image();
let rotation=0, flipX=1, flipY=1;

document.getElementById("upload").addEventListener("change",e=>{
const file=e.target.files[0];
if(!file)return;
const reader=new FileReader();
reader.onload=()=>{
img.onload=()=>{
canvas.width=img.width;
canvas.height=img.height;
setResizeInputs();
draw();
}
img.src=reader.result;
}
reader.readAsDataURL(file);
});

function draw(){
ctx.save();
ctx.clearRect(0,0,canvas.width,canvas.height);
ctx.filter=getFilters();
ctx.translate(canvas.width/2,canvas.height/2);
ctx.rotate(rotation*Math.PI/180);
ctx.scale(flipX,flipY);
ctx.drawImage(img,-canvas.width/2,-canvas.height/2,canvas.width,canvas.height);
ctx.restore();
}

function getFilters(){
return `
brightness(${brightness.value}%)
contrast(${contrast.value}%)
saturate(${saturation.value}%)
blur(${blur.value}px)
grayscale(${grayscale.value}%)
sepia(${sepia.value}%)
`;
}

document.querySelectorAll("input[type=range]").forEach(el=>{
el.addEventListener("input",draw);
});

function rotate(deg){rotation=(rotation+deg)%360;draw();}
function flipH(){flipX*=-1;draw();}
function flipV(){flipY*=-1;draw();}

function resizeImage(){
const w=parseInt(resizeW.value);
const h=parseInt(resizeH.value);
if(!w||!h)return;
canvas.width=w;
canvas.height=h;
draw();
}

function cropImage(){
const x=parseInt(cropX.value);
const y=parseInt(cropY.value);
const w=parseInt(cropW.value);
const h=parseInt(cropH.value);
if(!w||!h)return;

const imageData=ctx.getImageData(x,y,w,h);
canvas.width=w;
canvas.height=h;
ctx.putImageData(imageData,0,0);
}

function setResizeInputs(){
resizeW.value=canvas.width;
resizeH.value=canvas.height;
cropW.value=canvas.width;
cropH.value=canvas.height;
}

function resetAll(){
rotation=0;flipX=1;flipY=1;
brightness.value=100;
contrast.value=100;
saturation.value=100;
blur.value=0;
grayscale.value=0;
sepia.value=0;
canvas.width=img.width;
canvas.height=img.height;
setResizeInputs();
draw();
}

function downloadImage(){
const link=document.createElement("a");
link.download="edited-image.png";
link.href=canvas.toDataURL();
link.click();
}
</script>
</body>
</html>
